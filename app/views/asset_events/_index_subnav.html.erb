<div class="row">
	<div class="col-md-12">
		<div class="navbar navbar-default" role="navigation">

			<div class="container-fluid">
		  	<ul class="nav navbar-nav">
			    <li><%= link_to inventory_path(@asset) do %>
	  					<i class="fa fa-angle-left"></i> Back
				  		<% end %>
			  	</li>
					<li class="divider-vertical"></li>
					<li>
						<%= form_tag inventory_asset_events_path(@asset), :id => 'event_filter_form', :method => "get", :class => 'navbar-form form-inline' do %>
							<div class="input-prepend">
								<span class="add-on">Filter</span>
				    			<%= select_tag(:filter_type, options_for_select(AssetEventType.all.collect{|a| [a.name, a.id]}, :selected => @filter_type), :style => 'margin-top:0px', :prompt => 'All Updates', :id => 'event_filter') %>	  
			    		</div>  
						<% end %>		
					</li>
				</ul>
				<% if can? :update, @asset %>
					<%= form_tag new_inventory_asset_event_path(@asset), :id => 'asset_action_form', :method => "get", :class => 'navbar-form pull-right form-inline' do %>
						<div class="input-append">
							<%= select_tag(:event_type, options_for_select(AssetEventType.all.collect{|a| [a.name, a.id]}), :class => "inline", :prompt => 'Add Event...') %>
							<button class="btn" type="submit" id="submit_button">
								Add
							</button>
						</div>
					<% end %>
				<% end %>
			</div>

		</div>
	</div>
</div>
<script type="text/javascript" charset="utf-8">

	$(document).ready(function() {

		// Disable to add event button until a selection has been made
		$('#submit_button').attr('disabled','disabled');

		// Add an on change event for the dropdown
		$('#event_type').change(function() {
			var val = $(this).val();
			if (val === '') {
				$('#submit_button').attr('disabled','disabled');
			} else {
				$('#submit_button').removeAttr('disabled');
			}
		});

		// Add a listener on the event type filter that submits the form when changed
		$('#event_filter').change(function() {
			$('#event_filter_form').submit();  
		});
	});
	
</script>
