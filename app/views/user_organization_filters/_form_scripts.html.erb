<script type="text/javascript">

  // Document Ready
  $(document).ready(function(){
  	
  	var selected_set_name = 'user_organization_filter_grantee_ids';
  	var shuttle_target_id = 'selected_grantees'
  	
  	// Add an submit event handler for the form
  	$('#filter_form').submit(function(){
  		var shuttle_target = $('#' + shuttle_target_id);
  		var form_target = $('#' + selected_set_name);
	  	// select all the options in the selected array from the other shuttle list list
	  	var id_list = new Array();
		shuttle_target.children().map(function() {
			id_list.push($(this).val());
  		});	  	
  		//var id_list = new Array();
		//alert(id_list);
  		form_target.val(id_list);
  		//elem.children().map(function() {
  		//	id_list.push($(this).val());
  		//});
  		//alert($('#' + target_id).val());
  		return true;
  	});

    var t = $('#org_select').bootstrapTransfer({
    	target_id: shuttle_target_id,
     	height: '15em',
     	hilite_selection: false
     });
    var grantees = [];
    var selected = [];
    <% Grantee.all.each do |grantee| %>
      grantees.push({value: '<%= grantee.id %>', content: '<%= grantee.coded_name %>'});
    <% end %>

    <% @user_organization_filter.grantees.each do |grantee| %>
      selected.push('<%= grantee.id %>');
    <% end %>
    
    t.populate(grantees);
    t.set_values(selected);
    transam.make_same_height('.form-part');
  });


</script>
