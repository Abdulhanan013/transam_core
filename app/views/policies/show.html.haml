:css
  .submit-action, .cancel-action {
    font-size: 2.5em;
    margin-top: 15px;
  }
  .row-action:hover {
    cursor: pointer;
  }
  #spinner {
    top: 250px;
    left: 50%;
    z-index: 1001;
    margin-left: -2em;
    position: absolute;
  }

.row
  .col-sm-12
    %fieldset
      %legend Asset Replacement/Rehabilitation Policy
      = render 'summary'

.col-lg-12.col-md-12.col-sm-12.col-xs-12
  #spinner
    = loader_panel_tag({:message => "Working...", :size => 3, :spinner => "refresh"})

.row
  .col-sm-12#rules-container
    = render 'rules'

.modal.fade#rule-modal{:tabindex => -1, :role => 'dialog', :aria => {:hidden => true}}

= render 'table_edit_scripts'

:javascript

  var tab_key = 'policy_asset_types_tab_key';

  $(document).ready(function() {

    // Manage the tabs
    $('a[data-toggle="tab"]').on('shown.bs.tab', function(e) {
      // save the latest tab
      var this_tab = $(this).attr('href');
      transam.set_ui_key_value(tab_key, this_tab);
    });

    reset_view();
  });

  function reset_view() {
    // Make the tabs responsive if the viewport gets smaller than the displayed tabs
    $('.responsive-tabs').tabdrop({
      text: '<i class="fa fa-align-justify"></i>'
    });

    show_last_tab();
  };

  function show_last_tab() {
    var last_tab = transam.get_ui_key_value(tab_key);
    if (last_tab) {
      $('a[href='+last_tab+']').tab('show');
    } else {
      // Default to the first tab if no tab is stored
      $('a[data-toggle="tab"]:first').tab('show');
    }
  };
