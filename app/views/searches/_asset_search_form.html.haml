= simple_form_for(@searcher, :as => :searcher, :url => searches_path, :method => 'post', :html => {:class => 'form-vertical'}, :remote => true, :wrapper => :vertical_form,  :wrapper_mappings => {:check_boxes => :vertical_radio_and_checkboxes, :radio_buttons => :vertical_radio_and_checkboxes, :file => :vertical_file_input, :boolean => :vertical_boolean}) do |f|
  = hidden_field_tag :search_type, @search_type
  .row
    .col-sm-12
      .panel.panel-default
        .panel-heading
          .panel-title.clearfix{:data => {:toggle => "collapse", :target => "#asset_search_form"}}
            %button.btn.btn-primary.pull-right{:data => {:toggle => "collapse", :target => "#asset_search_form"}} Toggle Search Results
            %i.fa.fa-search.fa-fw
            %span{:data => {:toggle => "collapse", :target => "#asset_search_form"}}Search
        .panel-body.collapse.in#asset_search_form
          .row
            .col-lg-3.col-md-6
              %fieldset
                %legend.panel-legend Asset
                = f.input :organization_id, :collection => Organization.where(id: @organization_list), :label_method => 'coded_name', :include_blank => "Any..." unless @organization_list.count < 2
                = f.input :keyword, :placeholder => "Enter A Search Term"
                = f.input :asset_type_id, :collection => AssetType.all, :include_blank => "Any...", :label => "Type"
                = f.input :asset_subtype_id, :collection => AssetSubtype.all, :include_blank => "Any...", :label => "Subtype"
                = f.input :location_id, :collection => @organization.assets.where('asset_type_id = ?', 5), :include_blank => "Any..."
                = f.input :in_backlog, :as => :boolean, :label => "In Backlog"
            .col-lg-3.col-md-6
              %fieldset
                %legend.panel-legend Purchase
                = f.input :manufacturer_id, :collection => Manufacturer.all, :include_blank => "Any...", :multiple => true
                = f.input :manufacture_date, :wrapper => :vertical_prepend, :label => "Manufacture Year" do
                  .input-group-btn
                    %button.btn.btn-default.dropdown-toggle{"data-toggle" => "dropdown", :type => "button"}
                      During
                      %span.caret
                    %ul.dropdown-menu{:role => "menu"}
                      %li
                        %a{:data => {:compare => "-1"}} Before 
                      %li
                        %a{:data => {:compare => "0"}} During 
                      %li
                        %a{:data => {:compare => "1"}} After 
                    = f.input_field :manufacture_date_comparator, :as => :hidden, :value => '0'
                  = f.input_field :manufacture_date, :class => "form-control"
                = f.input :purchase_cost, :wrapper => :vertical_prepend do
                  .input-group-btn
                    %button.btn.btn-default.dropdown-toggle{"data-toggle" => "dropdown", :type => "button"}
                      Equal To
                      %span.caret
                    %ul.dropdown-menu{:role => "menu"}
                      %li
                        %a{:data => {:compare => "-1"}} Less Than
                      %li
                        %a{:data => {:compare => "0"}} Equal To
                      %li
                        %a{:data => {:compare => "1"}} Greater Than
                    = f.input_field :purchase_cost_comparator, :as => :hidden, :value => '0'
                  = f.input_field :purchase_cost, :class => "form-control", :as => :integer, :label => "Original Purchase Cost", input_html: { :min => '0'}
                = f.input :purchase_date, :wrapper => :vertical_prepend, :label => "Purchase Year" do
                  .input-group-btn
                    %button.btn.btn-default.dropdown-toggle{"data-toggle" => "dropdown", :type => "button"}
                      During
                      %span.caret
                    %ul.dropdown-menu{:role => "menu"}
                      %li
                        %a{:data => {:compare => "-1"}} Before 
                      %li
                        %a{:data => {:compare => "0"}} During 
                      %li
                        %a{:data => {:compare => "1"}} After 
                    = f.input_field :purchase_date_comparator, :as => :hidden, :value => '0'
                  = f.input_field :purchase_date, :class => "form-control"
                = f.input :estimated_value, :wrapper => :vertical_prepend do
                  .input-group-btn
                    %button.btn.btn-default.dropdown-toggle{"data-toggle" => "dropdown", :type => "button"}
                      Equal To
                      %span.caret
                    %ul.dropdown-menu{:role => "menu"}
                      %li
                        %a{:data => {:compare => "-1"}} Less Than
                      %li
                        %a{:data => {:compare => "0"}} Equal To
                      %li
                        %a{:data => {:compare => "1"}} Greater Than
                    = f.input_field :estimated_value_comparator, :as => :hidden, :value => '0'
                  = f.input_field :estimated_value, :class => "form-control", :label => "Estimated Current Value"
                = f.input :purchased_new, :as => :boolean, :label => "Purchased New", :label_html => { :class => 'bold' }
            .col-lg-3.col-md-6
              %fieldset
                %legend.panel-legend Condition
                = f.input :reported_mileage, :wrapper => :vertical_prepend, :label => "Mileage" do
                  .input-group-btn
                    %button.btn.btn-default.dropdown-toggle{"data-toggle" => "dropdown", :type => "button"}
                      Equal To
                      %span.caret
                    %ul.dropdown-menu{:role => "menu"}
                      %li
                        %a{:data => {:compare => "-1"}} Less Than
                      %li
                        %a{:data => {:compare => "0"}} Equal To
                      %li
                        %a{:data => {:compare => "1"}} Greater Than 
                    = f.input_field :reported_mileage_comparator, :as => :hidden, :value => '0'
                  = f.input_field :reported_mileage, :class => "form-control"
                = f.input :scheduled_replacement_year, :wrapper => :vertical_prepend do
                  .input-group-btn
                    %button.btn.btn-default.dropdown-toggle{"data-toggle" => "dropdown", :type => "button"}
                      During
                      %span.caret
                    %ul.dropdown-menu{:role => "menu"}
                      %li
                        %a{:data => {:compare => "-1"}} Before 
                      %li
                        %a{:data => {:compare => "0"}} During 
                      %li
                        %a{:data => {:compare => "1"}} After 
                    = f.input_field :scheduled_replacement_year_comparator, :as => :hidden, :value => '0'
                  = f.input_field :scheduled_replacement_year, :collection => get_fiscal_years, :class => "form-control", :include_blank => "Any..."
                = f.input :policy_replacement_year, :wrapper => :vertical_prepend, :label => "Policy Replacement Year" do
                  .input-group-btn
                    %button.btn.btn-default.dropdown-toggle{"data-toggle" => "dropdown", :type => "button"}
                      During
                      %span.caret
                    %ul.dropdown-menu{:role => "menu"}
                      %li
                        %a{:data => {:compare => "-1"}} Before 
                      %li
                        %a{:data => {:compare => "0"}} During 
                      %li
                        %a{:data => {:compare => "1"}} After 
                    = f.input_field :policy_replacement_year_comparator, :as => :hidden, :value => '0'
                  = f.input_field :policy_replacement_year, :collection => get_fiscal_years, :class => "form-control", :include_blank => "Any..."
                = f.input :condition_type_ids, :label => "Condition Type", :collection => ConditionType.all, include_blank: "Any..."
            .col-lg-3.col-md-6
              %fieldset
                %legend.panel-legend FTA
                = f.input :fta_vehicle_type_id, :collection => FtaVehicleType.all, :include_blank => "Any...", :multiple => true, :label => "FTA Vehicle Type"
                = f.input :fta_ownership_type_id, :collection => FtaOwnershipType.all, :include_blank => "Any...", :multiple => true, :label => "FTA Ownership Type"
                = f.input :fta_funding_type_id, :collection => FtaFundingType.all, :include_blank => "Any...", :multiple => true, :label => "FTA Funding Type"
                = f.input :fta_funding_source_type_id, :collection => FtaFundingSourceType.all, :include_blank => "Any...", :multiple => true, :label => "FTA Funding Source Type"
                = f.input :ada_accessible_lift, :as => :boolean, :label => "ADA Accessible Lift"
                = f.input :ada_accessible_ramp, :as => :boolean, :label => "ADA Accessible Ramp"
                = f.input :fta_emergency_contingency_fleet, :as => :boolean, :label => "Emergency Contingency Fleet"
          .row
            .col-md-12
              = f.button :submit, 'Search', :class=>"btn btn-primary", :id => 'submit_btn'
              = button_tag 'Reset', :type => 'reset', :class=> 'btn btn-warning'

:javascript
  $(".input-group-btn a").on("click", function() {
    // Set Hidden Field value and update button text
    $(this).parents("ul").siblings("input:hidden").val($(this).attr("data-compare"));
    $(this).parents("ul").prev("button").text($(this).text());
    $(this).parents("ul").prev("button").append("<span class='caret'></span>");
  });