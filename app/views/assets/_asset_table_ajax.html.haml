:ruby
  table_dom_id = SecureRandom.hex

.table-responsive
  %table.table.table-condensed.table-hover{:id => table_dom_id,
    :data => {:toggle => 'table',
    :url => inventory_index_path(:format => :json),
    :card_view => "false", :show_refresh => "true",
    :pagination => 'true', :side_pagination => 'server',
    :show_pagination_switch => 'true',
    :page_list => "[5, 10, 20, 50, 100, 200]",
    :page_size => current_user.num_table_rows,
    :search => 'false',
    :show_columns => 'true',
    :show_export => 'true',
    :resizable => 'true',
    :click_to_select => 'true',
    :query_params => "query_params",
    :single_select => 'true'}}
    %thead
      %tr
        - SystemConfig.transam_module_names.each do |mod|
          - if lookup_context.template_exists?("#{mod}_asset_table_head", 'assets', true)
            = render :partial => "assets/#{mod}_asset_table_head"

        %th.center.sorting_disabled.icon-column Flags
        %th.center.sorting_disabled.icon-column
          %i.fa.fa-info-circle

:javascript

  var asset_subtype = #{@asset_subtype.to_i};
  var asset_group = #{@asset_group.to_i};

  function query_params(params) {
    if (asset_subtype > 0) {
      params.asset_subtype = asset_subtype;
    }
    if (asset_group > 0) {
      params.asset_group = asset_group;
    }
    console.log(JSON.stringify(params));
    // {"limit":10,"offset":0,"order":"asc","your_param1":1,"your_param2":2}
    return params;
  }

  $('##{table_dom_id}').on('dbl-click-row.bs.table', function (e, row, $element) {
    console.log(row, $element);
    alert(row['object_key']);
    var url = '/sign_orders/' + row['object_key'];
    document.location.href = url;
  }).on('check.bs.table', function(e, row) {
    console.log(row);
    show_popup(row['object_key']);
  });

  function view_icon_formatter(value) {
    return '<i class="fa fa-search-plus fa-1-5x map-select" data-id ="' + value + '"></i>';
  };

  function date_formatter(value) {
    if (value) {
      var date = new Date(value);
      return date.getMonth() + 1 + "/" + date.getDate() + "/" + date.getFullYear();
    } else {
      return value;
    }
  };
  function flagged_formatter(value) {
    if (value == '1') {
      return '<i class="fa fa-star"></i>';
    } else {
      return '<i class="fa fa-star-o"></i>';
    }
  };

  $(window).resize(function() {
    $('##{table_dom_id}').bootstrapTable('resetView');
  });
